
<div class="container">
  <div class="row">
    <div class="col">

      @if (isUpdate) {
        <h1 class="mt-5 mb-5">Actualizar libro existente con id {{bookForm.get('id')?.value}}</h1>
      } @else {
        <h1 class="mt-5 mb-5">Crear nuevo libro</h1>
      }


        <form [formGroup]="bookForm" (ngSubmit)="save()">

          <input type="hidden" formControlName="id">

          <div class="form-floating mb-3">
            <input type="text" class="form-control"
            id="title" formControlName="title">
            <label for="title">Título del libro</label>
          </div>

          <div class="form-floating mb-3">
            <input type="text" class="form-control"
            id="isbn" formControlName="isbn">
            <label for="isbn">ISBN del libro</label>
          </div>

          <div class="form-floating mb-3">
            <input type="number" class="form-control" id="price" formControlName="price" step="0.01">
            <label for="price">Precio en euros (€)</label>
          </div>

          <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" id="published" formControlName="published">
            <label class="form-check-label" for="published" style="cursor:pointer;">
              Publicado
            </label>
          </div>

          <div class="form-floating mb-3">
            <input type="date" class="form-control" id="releaseDate" formControlName="releaseDate">
            <label for="releaseDate">Fecha de publicación del libro</label>
          </div>


          <div class="form-floating mb-3">
            <select class="form-select" id="author" formControlName="author" [compareWith]="compareObjects">

              @for (author of authors; track author.id) {
                <option [ngValue]="author">{{author.fullName}}</option>
              }

            </select>
            <label for="author">Autor/a del libro</label>
          </div>

          <div class="form-floating mb-3">
            <select class="form-select" id="editorial" formControlName="editorial" [compareWith]="compareObjects">

              @for (editorial of editorials; track editorial.id) {
                <option [ngValue]="editorial">{{editorial.name}}</option>
              }

            </select>
            <label for="editorial">Editorial del libro</label>
          </div>

          <div class="form-floating mb-3">
            <select class="form-select" id="type" formControlName="type">
              <option value="HARD_COVER">Tapa dura</option>
              <option value="SOFT_COVER">Tapa blanda</option>
              <option value="EBOOK">Libro electrónico (digital)</option>
              <option value="AUDIO_BOOK">Audiolibro</option>
            </select>
            <label for="type">Tipo de libro</label>
          </div>

          @if (isUpdate) {
            <button class="btn btn-success" type="submit">Actualizar</button>
          } @else {
            <button class="btn btn-success" type="submit">Crear</button>
          }


        </form>

    </div>
  </div>
</div>
